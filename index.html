<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Bedrock Playsound</title><script src="https://cdn.tailwindcss.com"></script><script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script><script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script></head><body class='text-zinc-900 dark:text-zinc-50'><div id="root"></div><script type="text/babel">const {useState,useMemo,useRef,useEffect}=React;const clamp=(v,a,b)=>Math.min(b,Math.max(a,v));const round=(v,d=2)=>{const f=10**d;return Math.round(v*f)/f};const pitchFromSemis=n=>2**(n/12);const semisFromPitch=p=>12*Math.log2(p);const demo=[{id:'demo.beep.c4',label:'Demo Beep C4 (261.63Hz)',oscHz:261.63},{id:'demo.beep.a4',label:'Demo Beep A4 (440Hz)',oscHz:440}];function App(){const[sounds,setSounds]=useState(demo);const[filter,setFilter]=useState('');const[semiRange,setSemiRange]=useState(48);const[vol,setVol]=useState(0.9);const[pitchMax,setPitchMax]=useState(4);const[pitchMap,setPitchMap]=useState(()=>new Map(demo.map(s=>[s.id,1])));const ctxRef=useRef(null),gainRef=useRef(null),bufRef=useRef(new Map()),actRef=useRef([]);const ensure=async()=>{if(!ctxRef.current){const c=new (window.AudioContext||window.webkitAudioContext)();const g=c.createGain();g.gain.value=vol;g.connect(c.destination);ctxRef.current=c;gainRef.current=g}if(ctxRef.current?.state==='suspended'){try{await ctxRef.current.resume()}catch{}}};useEffect(()=>{if(gainRef.current)gainRef.current.gain.value=vol},[vol]);const filtered=useMemo(()=>{const q=filter.trim().toLowerCase();return q?sounds.filter(s=>(s.id||'').toLowerCase().includes(q)||(s.label||'').toLowerCase().includes(q)):sounds},[filter,sounds]);const getP=id=>pitchMap.get(id)??1;const setP=(id,v)=>setPitchMap(p=>{const m=new Map(p);m.set(id,clamp(v,0.01,pitchMax));return m});const setSemis=(id,n)=>setP(id,clamp(pitchFromSemis(n),0.01,pitchMax));const stopAll=()=>{actRef.current.forEach(n=>{try{n.stop?.()}catch{}try{n.disconnect?.()}catch{}});actRef.current=[]};const beep=async(h=440,p=1,d=450)=>{await ensure();const c=ctxRef.current,g=gainRef.current,o=c.createOscillator(),e=c.createGain();o.type='sine';o.frequency.value=h*clamp(p,0.01,pitchMax);const now=c.currentTime;e.gain.setValueAtTime(0,now);e.gain.linearRampToValueAtTime(1,now+0.01);e.gain.linearRampToValueAtTime(0,now+Math.max(0.01,d/1000-0.03));o.connect(e);e.connect(g);actRef.current.push(o,e);o.start();o.stop(now+d/1000)};const loadBuf=async url=>{if(!url)return null;if(bufRef.current.has(url))return bufRef.current.get(url);await ensure();const r=await fetch(url);if(!r.ok)throw new Error('HTTP '+r.status);const a=await r.arrayBuffer();const b=await ctxRef.current.decodeAudioData(a);bufRef.current.set(url,b);return b};const playBuf=async(b,p=1)=>{await ensure();const c=ctxRef.current,g=gainRef.current,s=c.createBufferSource();s.buffer=b;s.playbackRate.value=clamp(p,0.01,pitchMax);s.connect(g);s.start();actRef.current.push(s)};const play=async s=>{const p=getP(s.id);if(s.url){try{const b=await loadBuf(s.url);if(b)await playBuf(b,p)}catch{await beep(440,p)}}else if(s.oscHz){await beep(s.oscHz,p)}else{await beep(440,p)}};const copy=async id=>{const p=round(getP(id),2);const cmd=`/playsound ${id} @s ~ ~ ~ 1 ${p}`;try{await navigator.clipboard.writeText(cmd);alert('복사됨: '+cmd)}catch{prompt('아래 명령을 복사하세요:',cmd)}};const Row=({s})=>{const p=getP(s.id),st=round(semisFromPitch(p),2);return(<div className='p-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/80 dark:bg-zinc-900/60'><div className='flex items-center justify-between gap-3'><div className='min-w-0'><div className='text-sm text-zinc-500 truncate'>{s.label||s.id}</div><div className='font-semibold truncate'>{s.id}</div></div><div className='flex gap-2 shrink-0'><button onClick={()=>play(s)} className='px-3 py-1.5 rounded-xl bg-zinc-900 text-white'>▶︎ Play</button><button onClick={()=>copy(s.id)} className='px-3 py-1.5 rounded-xl bg-zinc-100 dark:bg-zinc-800'>Copy /playsound</button></div></div><div className='mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 items-center'><label className='flex flex-col'><span className='text-xs text-zinc-500'>Pitch (0.01–{pitchMax.toFixed(2)})</span><input type='range' min={0.01} max={pitchMax} step={0.01} value={p} onChange={e=>setP(s.id,parseFloat(e.target.value))}/><span className='text-sm'>{p.toFixed(2)}</span></label><label className='flex flex-col'><span className='text-xs text-zinc-500'>Semitones (±{semiRange})</span><input type='range' min={-semiRange} max={semiRange} step={0.01} value={st} onChange={e=>setSemis(s.id,parseFloat(e.target.value))}/><span className='text-sm'>{st.toFixed(2)} st</span></label><div className='flex items-end gap-2'><input type='number' min={0.01} max={pitchMax} step={0.01} value={p.toFixed(2)} onChange={e=>setP(s.id,parseFloat(e.target.value||'1'))} className='w-24 px-2 py-1 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900'/><button onClick={()=>setP(s.id,1)} className='px-3 py-1.5 rounded-xl bg-zinc-100 dark:bg-zinc-800'>Reset</button></div></div></div>)};return(<div className='min-h-screen'><div className='mx-auto max-w-5xl px-4 py-8'><header className='flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6'><div><h1 className='text-2xl md:text-3xl font-bold'>Bedrock Playsound 리스트</h1><p className='text-zinc-500 mt-1 text-sm'>사운드 이벤트 목록 · 피치 조절 · /playsound 명령 복사</p></div></header><div className='grid gap-3'>{filtered.length===0?(<div className='text-zinc-500'>샘플이 없습니다.</div>):(filtered.map(s=><Row key={s.id} s={s}/>))}</div></div></div>)};const root=ReactDOM.createRoot(document.getElementById('root'));root.render(<App/>);</script></body></html>